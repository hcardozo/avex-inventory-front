(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"5VSb":function(i,r,e){"use strict";e.r(r),e.d(r,"PerfilGuiModule",(function(){return N}));var t=e("ofXK"),a=e("tyNb"),o=e("+Tu1"),n=e("0j/G"),c=e("fXoL"),s=e("4Uo6"),l=e("Cd5o"),b=e("JqCM"),d=e("7zfz"),u=e("rEr+"),f=e("6t4m"),p=e("Nf9I"),m=e("/RsI"),h=e("3Pt+"),g=e("rLzU");const v=["paginador"];function T(i,r){if(1&i&&(c.Ub(0,"option",18),c.Gc(1),c.Tb()),2&i){const i=r.$implicit;c.jc("value",i),c.Cb(1),c.Hc(i)}}function P(i,r){if(1&i){const i=c.Vb();c.Ub(0,"div",11),c.Ub(1,"h5",12),c.Gc(2,"perfils"),c.Tb(),c.Ub(3,"select",13),c.bc("ngModelChange",(function(r){return c.vc(i),c.dc().registros=r}))("change",(function(){return c.vc(i),c.dc().cambioCantidadRegistros()})),c.Ec(4,T,2,2,"option",14),c.Tb(),c.Ub(5,"span",15),c.Pb(6,"i",16),c.Ub(7,"input",17),c.bc("input",(function(r){return c.vc(i),c.dc(),c.uc(1).filterGlobal(r.target.value,"contains")})),c.Tb(),c.Tb(),c.Tb()}if(2&i){const i=c.dc();c.Cb(3),c.jc("ngModel",i.registros),c.Cb(1),c.jc("ngForOf",i.registrosHabilitados)}}function U(i,r){1&i&&(c.Ub(0,"tr"),c.Ub(1,"th",19),c.Gc(2," Perfil "),c.Pb(3,"p-sortIcon",20),c.Pb(4,"p-columnFilter",21),c.Tb(),c.Ub(5,"th",19),c.Gc(6," Descripci\xf3n "),c.Pb(7,"p-sortIcon",20),c.Pb(8,"p-columnFilter",21),c.Tb(),c.Ub(9,"th",19),c.Gc(10," Modulos "),c.Pb(11,"p-sortIcon",20),c.Pb(12,"p-columnFilter",21),c.Tb(),c.Ub(13,"th",22),c.Gc(14," Estado "),c.Pb(15,"p-sortIcon",23),c.Pb(16,"p-columnFilter",24),c.Tb(),c.Ub(17,"th"),c.Gc(18,"Acciones "),c.Tb(),c.Tb())}function C(i,r){if(1&i){const i=c.Vb();c.Ub(0,"tr"),c.Ub(1,"td"),c.Ub(2,"span",25),c.Gc(3,"Perfil"),c.Tb(),c.Gc(4),c.Tb(),c.Ub(5,"td"),c.Ub(6,"span",25),c.Gc(7,"Descripci\xf3n"),c.Tb(),c.Gc(8),c.Tb(),c.Ub(9,"td"),c.Ub(10,"div",26),c.Ub(11,"span",25),c.Gc(12,"Modulos"),c.Tb(),c.Ub(13,"i",27),c.bc("click",(function(){c.vc(i);const e=r.$implicit;return c.dc().showDialog(e.modulos)})),c.Tb(),c.Tb(),c.Tb(),c.Ub(14,"td"),c.Ub(15,"div",26),c.Ub(16,"span",25),c.Gc(17,"Estado"),c.Tb(),c.Ub(18,"p-inputSwitch",28),c.bc("onChange",(function(){c.vc(i);const e=r.$implicit;return c.dc().cambiarEstado(e)}))("ngModelChange",(function(e){return c.vc(i),r.$implicit.estado=e})),c.Tb(),c.Tb(),c.Tb(),c.Ub(19,"td",29),c.Ub(20,"div",30),c.Ub(21,"span",25),c.Gc(22,"Acciones"),c.Tb(),c.Ub(23,"button",31),c.bc("click",(function(){c.vc(i);const e=r.$implicit;return c.dc().modificarPerfil(e)})),c.Pb(24,"i",32),c.Tb(),c.Ub(25,"button",33),c.bc("click",(function(){c.vc(i);const e=r.$implicit;return c.dc().eliminarPerfil(e)})),c.Pb(26,"i",34),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&i){const i=r.$implicit;c.Cb(4),c.Ic("",i.nombre," "),c.Cb(4),c.Ic("",i.descripcion," "),c.Cb(10),c.jc("ngModel",i.estado)}}function M(i,r){if(1&i&&(c.Ub(0,"li"),c.Gc(1),c.Tb()),2&i){const i=r.$implicit;c.Cb(1),c.Hc(i.nombreModulo)}}const w=function(){return["nombre","estado"]},R=function(){return{width:"50vw"}};let S=(()=>{class i{constructor(i,r,e,t,a,o,n){var c,s,l;this.perfilService=i,this.moduloService=r,this.alertService=e,this.router=t,this.activatedRoute=a,this.spinner=o,this.confirmationService=n,this.listaPerfiles=[],this.pagina=1,this.registros=5,this.registrosHabilitados=[5,10,20,50],this.display=!1,this.segundoNivel=null===(l=null===(s=null===(c=this.router.getCurrentNavigation())||void 0===c?void 0:c.extras)||void 0===s?void 0:s.state)||void 0===l?void 0:l.datos}ngOnInit(){this.datosSesion=JSON.parse(localStorage.getItem(n.a)),this.refrescarTabla()}refrescarTabla(){this.spinner.show(),this.perfilService.infoPaginacion({parametro:{registros:this.registros}}).subscribe(i=>{null!=i.resultado&&(this.totalPaginas=i.resultado.totalPaginas,this.totalRegistros=i.resultado.totalRegistros,this.perfilService.listarPerfil({parametro:{pagina:this.pagina,registros:this.registros}}).subscribe(i=>{this.spinner.hide(),(null==i?void 0:i.resultadoList)&&(this.listaPerfiles=i.resultadoList)},i=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al listar Perfiles","Se presentan problemas al listar los perfiles, por favor intente nuevamente."),i}))})}modificarPerfil(i){this.router.navigate(["./modificarPerfil"],{state:{datosPerfil:i},relativeTo:this.activatedRoute.parent,skipLocationChange:!0})}cambioCantidadRegistros(){this.pagina=1,this.paginador.changePage(0),this.refrescarTabla()}cambiarPagina(i){this.pagina=i.page+1,this.refrescarTabla()}eliminarPerfil(i){this.confirmationService.confirm({message:`\xbfEsta seguro que desea eliminar el perfil ${i.nombre}?`,header:"Eliminar Perfil",icon:"pi pi-info-circle",accept:()=>{this.spinner.show(),this.perfilService.eliminarPerfil({parametro:{usuarioModificacion:this.datosSesion.usuarioAvexInfo.nombre,guid:i.guid_perfil}}).subscribe(i=>{(null==i?void 0:i.resultado.resultado)&&(this.cambioCantidadRegistros(),this.alertService.mostrarNotificacion(o.a.EXITOSA,"Perfil Eliminado","Perfil eliminado de manera correcta."))},i=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al eliminar Perfil","Se presentan problemas al realizar eliminaci\xf3n de la Perfil, por favor intente nuevamente."),i})},reject:()=>{}})}cambiarEstado(i){var r,e;this.spinner.show();let t={guid:i.guid_perfil,usuarioModificacion:null===(e=null===(r=this.datosSesion)||void 0===r?void 0:r.usuarioAvexInfo)||void 0===e?void 0:e.nombre};this.perfilService.cambiarEstadoPerfil({parametro:t}).subscribe(()=>{this.spinner.hide()},i=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al actualizar Perfil","Se presentan problemas al realizar actualizacion de estado de perfil, por favor intente nuevamente."),i})}showDialog(i){this.display=!0,this.vistaPreviaModulos=i}}return i.\u0275fac=function(r){return new(r||i)(c.Ob(s.o),c.Ob(s.m),c.Ob(l.a),c.Ob(a.b),c.Ob(a.a),c.Ob(b.c),c.Ob(d.b))},i.\u0275cmp=c.Ib({type:i,selectors:[["app-listar-perfil"]],viewQuery:function(i,r){var e;1&i&&c.Jc(v,!0),2&i&&c.tc(e=c.cc())&&(r.paginador=e.first)},decls:12,vars:14,consts:[["dataKey","id","styleClass","p-datatable-responsive-demo",3,"value","globalFilterFields","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"rows","totalRecords","pageLinkSize","first","onPageChange"],["paginador",""],[3,"baseZIndex"],["header","Modulos",3,"visible","visibleChange"],[1,"vista-previa-modulos"],[4,"ngFor","ngForOf"],[1,"cabecera-tabla"],[1,"titulo"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Search...",3,"input"],[3,"value"],["pSortableColumn","nombre"],["field","nombre"],["type","text","field","nombre","display","menu"],["pSortableColumn","estado"],["field","estado"],["type","boolean","field","estado","display","menu"],[1,"p-column-title"],[1,"content-perfiles-list"],[1,"fa","fa-eye",3,"click"],[3,"ngModel","onChange","ngModelChange"],[1,"acciones"],[1,"content-acciones"],[1,"btn","btn-warning",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(i,r){1&i&&(c.Ub(0,"p-table",0,1),c.Ec(2,P,8,2,"ng-template",2),c.Ec(3,U,19,0,"ng-template",3),c.Ec(4,C,27,3,"ng-template",4),c.Tb(),c.Ub(5,"p-paginator",5,6),c.bc("onPageChange",(function(i){return r.cambiarPagina(i)})),c.Tb(),c.Pb(7,"p-confirmDialog",7),c.Ub(8,"p-dialog",8),c.bc("visibleChange",(function(i){return r.display=i})),c.Ub(9,"div",9),c.Ub(10,"ul"),c.Ec(11,M,2,1,"li",10),c.Tb(),c.Tb(),c.Tb()),2&i&&(c.jc("value",r.listaPerfiles)("globalFilterFields",c.kc(12,w))("rowHover",!0),c.Cb(5),c.jc("rows",r.registros)("totalRecords",r.totalRegistros)("pageLinkSize",3)("first",0),c.Cb(2),c.Ac(c.kc(13,R)),c.jc("baseZIndex",0),c.Cb(1),c.jc("visible",r.display),c.Cb(3),c.jc("ngForOf",r.vistaPreviaModulos))},directives:[u.d,d.j,f.a,p.a,m.a,t.j,h.p,h.k,h.m,h.n,h.r,u.c,u.b,u.a,g.a],styles:[".content-acciones[_ngcontent-%COMP%], .content-perfiles-list[_ngcontent-%COMP%]{width:auto;height:auto;display:flex;justify-content:center}.content-acciones[_ngcontent-%COMP%] > button.btn[_ngcontent-%COMP%]{margin-left:10px!important;margin-right:10px!important}"]}),i})();var y=e("jMqV");function I(i,r){1&i&&(c.Ub(0,"span",14),c.Gc(1," Campo nombre es requerido "),c.Tb())}function G(i,r){1&i&&(c.Ub(0,"span",14),c.Gc(1," Campo nombre es requerido "),c.Tb())}function O(i,r){if(1&i){const i=c.Vb();c.Ub(0,"button",15),c.bc("click",(function(){c.vc(i);const r=c.dc(2);return r.registrarMarca(r.formulario)})),c.Gc(1," Agregar "),c.Tb()}if(2&i){const i=c.dc(2);c.jc("disabled",!i.formularioActual.valid)}}function j(i,r){if(1&i){const i=c.Vb();c.Ub(0,"button",15),c.bc("click",(function(){c.vc(i);const r=c.dc(2);return r.modificarMarca(r.formulario)})),c.Gc(1," Modificar "),c.Tb()}if(2&i){const i=c.dc(2);c.jc("disabled",!i.formularioActual.valid)}}function E(i,r){if(1&i&&(c.Ub(0,"div",1),c.Ub(1,"h2"),c.Pb(2,"i",2),c.Gc(3),c.Tb(),c.Ub(4,"form",3),c.Ub(5,"div",4),c.Ub(6,"label",5),c.Gc(7,"Nombre"),c.Tb(),c.Pb(8,"input",6),c.Tb(),c.Ec(9,I,2,0,"span",7),c.Ub(10,"div",4),c.Ub(11,"label",8),c.Gc(12,"Descripci\xf3n"),c.Tb(),c.Pb(13,"textarea",9),c.Tb(),c.Ec(14,G,2,0,"span",7),c.Ub(15,"div",4),c.Ub(16,"label",10),c.Gc(17,"Habilitar"),c.Tb(),c.Pb(18,"mat-slide-toggle",11),c.Tb(),c.Ub(19,"div",12),c.Ec(20,O,2,1,"button",13),c.Ec(21,j,2,1,"button",13),c.Tb(),c.Tb(),c.Tb()),2&i){const i=c.dc();c.Cb(3),c.Ic(" ",null!=i.parametrosRuta&&i.parametrosRuta.modificacion?" Modificar":"Agregar "," Perfil "),c.Cb(1),c.jc("formGroup",i.formularioActual),c.Cb(5),c.jc("ngIf",i.formulario.nombre.dirty&&i.formulario.nombre.errors&&i.formulario.nombre.errors.required),c.Cb(5),c.jc("ngIf",i.formulario.nombre.dirty&&i.formulario.nombre.errors&&i.formulario.nombre.errors.required),c.Cb(6),c.jc("ngIf",!(null!=i.parametrosRuta&&i.parametrosRuta.modificacion)),c.Cb(1),c.jc("ngIf",null==i.parametrosRuta?null:i.parametrosRuta.modificacion)}}let k=(()=>{class i{constructor(i,r,e,t){var a,o,n,c;this.perfilService=i,this.alertService=r,this.spinner=e,this.router=t,this.formularioRegistrarMarca=new h.f({nombre:new h.d("",[h.q.required]),habilitar:new h.d(!0,[h.q.required])}),this.formularioModificacionMarca=new h.f({nombre:new h.d("",[h.q.required]),habilitar:new h.d(!0,[h.q.required]),guidMarca:new h.d("",[h.q.required])}),this.parametrosRuta={},this.parametrosRuta.datosMarca=null===(n=null===(o=null===(a=this.router.getCurrentNavigation())||void 0===a?void 0:a.extras)||void 0===o?void 0:o.state)||void 0===n?void 0:n.datosMarca,this.parametrosRuta.modificacion=!!(null===(c=this.parametrosRuta)||void 0===c?void 0:c.datosMarca)}ngOnInit(){this.datosSesion=JSON.parse(localStorage.getItem(n.a)),this.parametrosRuta.modificacion?(this.formularioActual=this.formularioModificacionMarca,this.asignarValoresModificacion()):this.formularioActual=this.formularioRegistrarMarca}get formulario(){return this.formularioActual.controls}asignarValoresModificacion(){this.formulario.nombre.setValue(this.parametrosRuta.datosMarca.nombre),this.formulario.habilitar.setValue(this.parametrosRuta.datosMarca.estado),this.formularioActual.updateValueAndValidity()}}return i.\u0275fac=function(r){return new(r||i)(c.Ob(s.o),c.Ob(l.a),c.Ob(b.c),c.Ob(a.b))},i.\u0275cmp=c.Ib({type:i,selectors:[["app-registrar-perfil"]],decls:1,vars:1,consts:[["class","contenedor",4,"ngIf"],[1,"contenedor"],[1,"fa","fa-align-justify"],[3,"formGroup"],[1,"item-formulario"],["for","nombre"],["type","text","placeholder","Nombre del perfil","autocomplete","off","formControlName","nombre","id","nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["for","descripcion"],["placeholder","Descripci\xf3n del perfil","autocomplete","off","formControlName","descripcion","id","descripcion",1,"form-control"],["for","habilitar",1,"label-personalizado"],["formControlName","habilitar","color","primary","id","habilitar"],[1,"contenedor-botones"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"text-danger"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(i,r){1&i&&c.Ec(0,E,22,6,"div",0),2&i&&c.jc("ngIf",r.formularioActual)},directives:[t.k,h.s,h.l,h.g,h.b,h.k,h.e,y.a],styles:[""]}),i})();const q=[{path:"",redirectTo:"listarPerfiles"},{path:"listarPerfiles",component:S},{path:"registrarPerfil",component:k},{path:"modificarPerfil",component:k}];let A=(()=>{class i{}return i.\u0275mod=c.Mb({type:i}),i.\u0275inj=c.Lb({factory:function(r){return new(r||i)},imports:[[a.c.forChild(q)],a.c]}),i})();var x=e("0YIw");let N=(()=>{class i{}return i.\u0275mod=c.Mb({type:i}),i.\u0275inj=c.Lb({factory:function(r){return new(r||i)},imports:[[t.b,x.a,A,s.n,s.l]]}),i})()}}]);