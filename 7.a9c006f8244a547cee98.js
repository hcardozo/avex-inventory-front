(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"8p92":function(a,i,r){"use strict";r.r(i),r.d(i,"CategoriaGuiModule",(function(){return k}));var e=r("ofXK"),t=r("tyNb"),o=r("+Tu1"),n=r("0j/G"),s=r("fXoL"),c=r("4Uo6"),l=r("eGJP"),d=r("Cd5o"),u=r("JqCM"),b=r("7zfz"),g=r("rEr+"),m=r("6t4m"),p=r("Nf9I"),f=r("3Pt+"),h=r("rLzU");const v=["paginador"];function C(a,i){if(1&a&&(s.Ub(0,"option",15),s.Gc(1),s.Tb()),2&a){const a=i.$implicit;s.jc("value",a),s.Cb(1),s.Hc(a)}}function T(a,i){if(1&a){const a=s.Vb();s.Ub(0,"div",8),s.Ub(1,"h5",9),s.Gc(2,"Categorias"),s.Tb(),s.Ub(3,"select",10),s.bc("ngModelChange",(function(i){return s.vc(a),s.dc().registros=i}))("change",(function(){return s.vc(a),s.dc().cambioCantidadRegistros()})),s.Ec(4,C,2,2,"option",11),s.Tb(),s.Ub(5,"span",12),s.Pb(6,"i",13),s.Ub(7,"input",14),s.bc("input",(function(i){return s.vc(a),s.dc(),s.uc(1).filterGlobal(i.target.value,"contains")})),s.Tb(),s.Tb(),s.Tb()}if(2&a){const a=s.dc();s.Cb(3),s.jc("ngModel",a.registros),s.Cb(1),s.jc("ngForOf",a.registrosHabilitados)}}function S(a,i){1&a&&(s.Ub(0,"tr"),s.Ub(1,"th",16),s.Gc(2," Categoria "),s.Pb(3,"p-sortIcon",17),s.Pb(4,"p-columnFilter",18),s.Tb(),s.Ub(5,"th",19),s.Gc(6," Estado "),s.Pb(7,"p-sortIcon",20),s.Pb(8,"p-columnFilter",21),s.Tb(),s.Ub(9,"th"),s.Gc(10,"Acciones "),s.Tb(),s.Tb())}function R(a,i){if(1&a){const a=s.Vb();s.Ub(0,"tr"),s.Ub(1,"td"),s.Ub(2,"span",22),s.Gc(3,"Categoria"),s.Tb(),s.Gc(4),s.Tb(),s.Ub(5,"td"),s.Ub(6,"span",22),s.Gc(7,"Estado"),s.Tb(),s.Ub(8,"p-inputSwitch",23),s.bc("onChange",(function(){s.vc(a);const r=i.$implicit;return s.dc().cambiarEstado(r)}))("ngModelChange",(function(r){return s.vc(a),i.$implicit.estado=r})),s.Tb(),s.Tb(),s.Ub(9,"td",24),s.Ub(10,"span",22),s.Gc(11,"Acciones"),s.Tb(),s.Ub(12,"button",25),s.bc("click",(function(){s.vc(a);const r=i.$implicit;return s.dc().modificarCategoria(r)})),s.Pb(13,"i",26),s.Tb(),s.Ub(14,"button",27),s.bc("click",(function(){s.vc(a);const r=i.$implicit;return s.dc().eliminarCategoria(r)})),s.Pb(15,"i",28),s.Tb(),s.Tb(),s.Tb()}if(2&a){const a=i.$implicit;s.Cb(4),s.Hc(a.nombre),s.Cb(4),s.jc("ngModel",a.estado)}}const U=function(){return["nombre","estado"]},w=function(){return{width:"50vw"}};let E=(()=>{class a{constructor(a,i,r,e,t,o,n){var s,c,l;this.categoriaService=a,this.metodosComunes=i,this.alertService=r,this.router=e,this.activatedRoute=t,this.spinner=o,this.confirmationService=n,this.listaCategorias=[],this.pagina=1,this.registros=5,this.registrosHabilitados=[5,10,20,50],this.segundoNivel=null===(l=null===(c=null===(s=this.router.getCurrentNavigation())||void 0===s?void 0:s.extras)||void 0===c?void 0:c.state)||void 0===l?void 0:l.datos}ngOnInit(){this.datosSesion=JSON.parse(localStorage.getItem(n.a)),this.refrescarTabla()}refrescarTabla(){this.spinner.show(),this.categoriaService.infoPaginacion({parametro:{registros:this.registros}}).subscribe(a=>{null!=a.resultado&&(this.totalPaginas=a.resultado.totalPaginas,this.totalRegistros=a.resultado.totalRegistros,this.categoriaService.listarCategoria({parametro:{pagina:this.pagina,registros:this.registros}}).subscribe(a=>{this.spinner.hide(),(null==a?void 0:a.resultadoList)&&(this.listaCategorias=a.resultadoList)},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al listar Campa\xf1as","Se presentan problemas al listar los registros de campa\xf1as, por favor intente nuevamente."),a}))})}modificarCategoria(a){this.router.navigate(["./modificarCategoria"],{state:{datosCategoria:a},relativeTo:this.activatedRoute.parent,skipLocationChange:!0})}cambioCantidadRegistros(){this.pagina=1,this.paginador.changePage(0),this.refrescarTabla()}cambiarPagina(a){this.pagina=a.page+1,this.refrescarTabla()}eliminarCategoria(a){this.confirmationService.confirm({message:`\xbfEsta seguro que desea eliminar la categoria ${a.nombre}?`,header:"Eliminar Categoria",icon:"pi pi-info-circle",accept:()=>{this.spinner.show(),this.categoriaService.eliminarCategoria({parametro:{usuarioModificacion:this.datosSesion.usuarioAvexInfo.nombre,guid:a.guidCategoria}}).subscribe(a=>{(null==a?void 0:a.resultado.resultado)&&(this.cambioCantidadRegistros(),this.alertService.mostrarNotificacion(o.a.EXITOSA,"Categoria Eliminada","Categoria eliminada de manera correcta."))},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al eliminar Categoria","Se presentan problemas al realizar eliminacion de la categoria, por favor intente nuevamente."),a})},reject:()=>{}})}cambiarEstado(a){var i,r;this.spinner.show();let e={guid:a.guidCategoria,usuarioModificacion:null===(r=null===(i=this.datosSesion)||void 0===i?void 0:i.usuarioAvexInfo)||void 0===r?void 0:r.nombre};this.categoriaService.cambiarEstadoCategoria({parametro:e}).subscribe(()=>{this.spinner.hide()},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al actualizar Usuario","Se presentan problemas al realizar actualizacion de estado de usuario, por favor intente nuevamente."),a})}}return a.\u0275fac=function(i){return new(i||a)(s.Ob(c.d),s.Ob(l.a),s.Ob(d.a),s.Ob(t.b),s.Ob(t.a),s.Ob(u.c),s.Ob(b.b))},a.\u0275cmp=s.Ib({type:a,selectors:[["app-listar-categoria"]],viewQuery:function(a,i){var r;1&a&&s.Jc(v,!0),2&a&&s.tc(r=s.cc())&&(i.paginador=r.first)},decls:8,vars:12,consts:[["dataKey","id","styleClass","p-datatable-responsive-demo",3,"value","globalFilterFields","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"rows","totalRecords","pageLinkSize","first","onPageChange"],["paginador",""],[3,"baseZIndex"],[1,"cabecera-tabla"],[1,"titulo"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Search...",3,"input"],[3,"value"],["pSortableColumn","nombre"],["field","nombre"],["type","text","field","nombre","display","menu"],["pSortableColumn","estado"],["field","estado"],["type","boolean","field","estado","display","menu"],[1,"p-column-title"],[3,"ngModel","onChange","ngModelChange"],[1,"acciones"],[1,"btn","btn-warning",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(a,i){1&a&&(s.Ub(0,"p-table",0,1),s.Ec(2,T,8,2,"ng-template",2),s.Ec(3,S,11,0,"ng-template",3),s.Ec(4,R,16,2,"ng-template",4),s.Tb(),s.Ub(5,"p-paginator",5,6),s.bc("onPageChange",(function(a){return i.cambiarPagina(a)})),s.Tb(),s.Pb(7,"p-confirmDialog",7)),2&a&&(s.jc("value",i.listaCategorias)("globalFilterFields",s.kc(10,U))("rowHover",!0),s.Cb(5),s.jc("rows",i.registros)("totalRecords",i.totalRegistros)("pageLinkSize",3)("first",0),s.Cb(2),s.Ac(s.kc(11,w)),s.jc("baseZIndex",0))},directives:[g.d,b.j,m.a,p.a,f.p,f.k,f.m,e.j,f.n,f.r,g.c,g.b,g.a,h.a],styles:[""]}),a})();var I=r("jMqV");function y(a,i){1&a&&(s.Ub(0,"span",14),s.Gc(1," Campo nombre es requerido "),s.Tb())}function O(a,i){1&a&&(s.Ub(0,"span",14),s.Gc(1," Campo descripcion es requerido "),s.Tb())}function G(a,i){if(1&a){const a=s.Vb();s.Ub(0,"button",15),s.bc("click",(function(){s.vc(a);const i=s.dc(2);return i.registrarCategoria(i.formulario)})),s.Gc(1," Agregar "),s.Tb()}if(2&a){const a=s.dc(2);s.jc("disabled",!a.formularioActual.valid)}}function j(a,i){if(1&a){const a=s.Vb();s.Ub(0,"button",15),s.bc("click",(function(){s.vc(a);const i=s.dc(2);return i.modificarCategoria(i.formulario)})),s.Gc(1," Modificar "),s.Tb()}if(2&a){const a=s.dc(2);s.jc("disabled",!a.formularioActual.valid)}}function M(a,i){if(1&a&&(s.Ub(0,"div",1),s.Ub(1,"h2"),s.Pb(2,"i",2),s.Gc(3),s.Tb(),s.Ub(4,"form",3),s.Ub(5,"div",4),s.Ub(6,"label",5),s.Gc(7,"Nombre"),s.Tb(),s.Pb(8,"input",6),s.Tb(),s.Ec(9,y,2,0,"span",7),s.Ub(10,"div",4),s.Ub(11,"label",8),s.Gc(12,"Descripcion"),s.Tb(),s.Ub(13,"textarea",9),s.Gc(14," "),s.Tb(),s.Tb(),s.Ec(15,O,2,0,"span",7),s.Ub(16,"div",4),s.Ub(17,"label",10),s.Gc(18,"Habilitar"),s.Tb(),s.Pb(19,"mat-slide-toggle",11),s.Tb(),s.Ub(20,"div",12),s.Ec(21,G,2,1,"button",13),s.Ec(22,j,2,1,"button",13),s.Tb(),s.Tb(),s.Tb()),2&a){const a=s.dc();s.Cb(3),s.Ic(" ",null!=a.parametrosRuta&&a.parametrosRuta.modificacion?" Modificar":"Agregar "," Categoria "),s.Cb(1),s.jc("formGroup",a.formularioActual),s.Cb(5),s.jc("ngIf",a.formulario.nombre.dirty&&a.formulario.nombre.errors&&a.formulario.nombre.errors.required),s.Cb(6),s.jc("ngIf",a.formulario.descripcion.dirty&&a.formulario.descripcion.errors&&a.formulario.descripcion.errors.required),s.Cb(6),s.jc("ngIf",!(null!=a.parametrosRuta&&a.parametrosRuta.modificacion)),s.Cb(1),s.jc("ngIf",null==a.parametrosRuta?null:a.parametrosRuta.modificacion)}}let A=(()=>{class a{constructor(a,i,r,e){var t,o,n,s;this.categoriaService=a,this.alertService=i,this.spinner=r,this.router=e,this.formularioRegistrarCategoria=new f.f({nombre:new f.d("",[f.q.required]),descripcion:new f.d("",[f.q.required]),habilitar:new f.d(!0,[f.q.required])}),this.formularioModificacionCategoria=new f.f({nombre:new f.d("",[f.q.required]),descripcion:new f.d("",[f.q.required]),habilitar:new f.d(!0,[f.q.required]),guidCategoria:new f.d("",[f.q.required])}),this.parametrosRuta={},this.parametrosRuta.datosCategoria=null===(n=null===(o=null===(t=this.router.getCurrentNavigation())||void 0===t?void 0:t.extras)||void 0===o?void 0:o.state)||void 0===n?void 0:n.datosCategoria,this.parametrosRuta.modificacion=!!(null===(s=this.parametrosRuta)||void 0===s?void 0:s.datosCategoria)}ngOnInit(){this.datosSesion=JSON.parse(localStorage.getItem(n.a)),this.parametrosRuta.modificacion?(this.formularioActual=this.formularioModificacionCategoria,this.asignarValoresModificacion()):this.formularioActual=this.formularioRegistrarCategoria}get formulario(){return this.formularioActual.controls}asignarValoresModificacion(){this.formulario.nombre.setValue(this.parametrosRuta.datosCategoria.nombre),this.formulario.descripcion.setValue(this.parametrosRuta.datosCategoria.descripcion),this.formulario.guidCategoria.setValue(this.parametrosRuta.datosCategoria.guidCategoria),this.formulario.habilitar.setValue(this.parametrosRuta.datosCategoria.estado),this.formularioActual.updateValueAndValidity()}registrarCategoria(a){let i={usuarioCreacion:this.datosSesion.usuarioAvexInfo.usuario,nombre:a.nombre.value,descripcion:a.descripcion.value,estado:a.habilitar.value};this.spinner.show(),this.categoriaService.registrarCategoria({parametro:i}).subscribe(a=>{var i;this.spinner.hide(),!0===(null===(i=null==a?void 0:a.resultado)||void 0===i?void 0:i.resultado)&&(this.formularioActual.reset(),this.formulario.habilitar.setValue(!0),this.alertService.mostrarNotificacion(o.a.EXITOSA,"Registro de Categoria","Categoria registrada exitosamente."))},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al registrar Categoria","Se presentan problemas al realizar el registro de la categoria, por favor intente nuevamente."),a})}modificarCategoria(a){let i={usuarioModificacion:this.datosSesion.usuarioAvexInfo.usuario,guidCategoria:a.guidCategoria.value,nombre:a.nombre.value,descripcion:a.descripcion.value,estado:a.habilitar.value};console.log(i),this.spinner.show(),this.categoriaService.modificarCategoria({parametro:i}).subscribe(a=>{var i;this.spinner.hide(),!0===(null===(i=null==a?void 0:a.resultado)||void 0===i?void 0:i.resultado)&&this.alertService.mostrarNotificacion(o.a.EXITOSA,"Modificacion de Categoria","Categoria modificada exitosamente.")},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al modificar Categoria","Se presentan problemas al realizar la modificacion de la categoria, por favor intente nuevamente."),a})}}return a.\u0275fac=function(i){return new(i||a)(s.Ob(c.d),s.Ob(d.a),s.Ob(u.c),s.Ob(t.b))},a.\u0275cmp=s.Ib({type:a,selectors:[["app-registrar-categoria"]],decls:1,vars:1,consts:[["class","contenedor",4,"ngIf"],[1,"contenedor"],[1,"fa","fa-align-justify"],[3,"formGroup"],[1,"item-formulario"],["for","nombre"],["type","text","placeholder","Nombre de la Categoria","autocomplete","off","formControlName","nombre","id","nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["for","descripcion"],["type","text","placeholder","Descripcion","autocomplete","off","formControlName","descripcion","id","descripcion",1,"form-control"],["for","habilitar",1,"label-personalizado"],["formControlName","habilitar","color","primary","id","habilitar"],[1,"contenedor-botones"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"text-danger"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(a,i){1&a&&s.Ec(0,M,23,6,"div",0),2&a&&s.jc("ngIf",i.formularioActual)},directives:[e.k,f.s,f.l,f.g,f.b,f.k,f.e,I.a],styles:[""]}),a})();const q=[{path:"",redirectTo:"registrarCategoria"},{path:"listarCategorias",component:E},{path:"registrarCategoria",component:A},{path:"modificarCategoria",component:A}];let P=(()=>{class a{}return a.\u0275mod=s.Mb({type:a}),a.\u0275inj=s.Lb({factory:function(i){return new(i||a)},imports:[[t.c.forChild(q)],t.c]}),a})();var N=r("0YIw");let k=(()=>{class a{}return a.\u0275mod=s.Mb({type:a}),a.\u0275inj=s.Lb({factory:function(i){return new(i||a)},imports:[[e.b,N.a,P,c.c]]}),a})()}}]);