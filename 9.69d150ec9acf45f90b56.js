(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Uwgi:function(a,r,i){"use strict";i.r(r),i.d(r,"MarcaGuiModule",(function(){return N}));var t=i("ofXK"),e=i("tyNb"),o=i("+Tu1"),n=i("0j/G"),s=i("fXoL"),c=i("4Uo6"),l=i("Cd5o"),u=i("JqCM"),d=i("7zfz"),b=i("rEr+"),m=i("6t4m"),p=i("Nf9I"),f=i("3Pt+"),h=i("rLzU");const g=["paginador"];function v(a,r){if(1&a&&(s.Ub(0,"option",15),s.Gc(1),s.Tb()),2&a){const a=r.$implicit;s.jc("value",a),s.Cb(1),s.Hc(a)}}function M(a,r){if(1&a){const a=s.Vb();s.Ub(0,"div",8),s.Ub(1,"h5",9),s.Gc(2,"Marcas"),s.Tb(),s.Ub(3,"select",10),s.bc("ngModelChange",(function(r){return s.vc(a),s.dc().registros=r}))("change",(function(){return s.vc(a),s.dc().cambioCantidadRegistros()})),s.Ec(4,v,2,2,"option",11),s.Tb(),s.Ub(5,"span",12),s.Pb(6,"i",13),s.Ub(7,"input",14),s.bc("input",(function(r){return s.vc(a),s.dc(),s.uc(1).filterGlobal(r.target.value,"contains")})),s.Tb(),s.Tb(),s.Tb()}if(2&a){const a=s.dc();s.Cb(3),s.jc("ngModel",a.registros),s.Cb(1),s.jc("ngForOf",a.registrosHabilitados)}}function T(a,r){1&a&&(s.Ub(0,"tr"),s.Ub(1,"th",16),s.Gc(2," Marca "),s.Pb(3,"p-sortIcon",17),s.Pb(4,"p-columnFilter",18),s.Tb(),s.Ub(5,"th",19),s.Gc(6," Estado "),s.Pb(7,"p-sortIcon",20),s.Pb(8,"p-columnFilter",21),s.Tb(),s.Ub(9,"th"),s.Gc(10,"Acciones "),s.Tb(),s.Tb())}function S(a,r){if(1&a){const a=s.Vb();s.Ub(0,"tr"),s.Ub(1,"td"),s.Ub(2,"span",22),s.Gc(3,"Categoria"),s.Tb(),s.Gc(4),s.Tb(),s.Ub(5,"td"),s.Ub(6,"span",22),s.Gc(7,"Estado"),s.Tb(),s.Ub(8,"p-inputSwitch",23),s.bc("onChange",(function(){s.vc(a);const i=r.$implicit;return s.dc().cambiarEstado(i)}))("ngModelChange",(function(i){return s.vc(a),r.$implicit.estado=i})),s.Tb(),s.Tb(),s.Ub(9,"td",24),s.Ub(10,"span",22),s.Gc(11,"Acciones"),s.Tb(),s.Ub(12,"button",25),s.bc("click",(function(){s.vc(a);const i=r.$implicit;return s.dc().modificarMarca(i)})),s.Pb(13,"i",26),s.Tb(),s.Ub(14,"button",27),s.bc("click",(function(){s.vc(a);const i=r.$implicit;return s.dc().eliminarMarca(i)})),s.Pb(15,"i",28),s.Tb(),s.Tb(),s.Tb()}if(2&a){const a=r.$implicit;s.Cb(4),s.Hc(a.nombre),s.Cb(4),s.jc("ngModel",a.estado)}}const R=function(){return["nombre","estado"]},w=function(){return{width:"50vw"}};let C=(()=>{class a{constructor(a,r,i,t,e,o){var n,s,c;this.marcaService=a,this.alertService=r,this.router=i,this.activatedRoute=t,this.spinner=e,this.confirmationService=o,this.listaMarcas=[],this.pagina=1,this.registros=5,this.registrosHabilitados=[5,10,20,50],this.segundoNivel=null===(c=null===(s=null===(n=this.router.getCurrentNavigation())||void 0===n?void 0:n.extras)||void 0===s?void 0:s.state)||void 0===c?void 0:c.datos}ngOnInit(){this.datosSesion=JSON.parse(localStorage.getItem(n.a)),this.refrescarTabla()}refrescarTabla(){this.spinner.show(),this.marcaService.infoPaginacion({parametro:{registros:this.registros}}).subscribe(a=>{null!=a.resultado&&(this.totalPaginas=a.resultado.totalPaginas,this.totalRegistros=a.resultado.totalRegistros,this.marcaService.listarMarca({parametro:{pagina:this.pagina,registros:this.registros}}).subscribe(a=>{this.spinner.hide(),(null==a?void 0:a.resultadoList)&&(this.listaMarcas=a.resultadoList)},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al listar Campa\xf1as","Se presentan problemas al listar los registros de campa\xf1as, por favor intente nuevamente."),a}))})}modificarMarca(a){this.router.navigate(["./modificarMarca"],{state:{datosMarca:a},relativeTo:this.activatedRoute.parent,skipLocationChange:!0})}cambioCantidadRegistros(){this.pagina=1,this.paginador.changePage(0),this.refrescarTabla()}cambiarPagina(a){this.pagina=a.page+1,this.refrescarTabla()}eliminarMarca(a){this.confirmationService.confirm({message:`\xbfEsta seguro que desea eliminar la marca ${a.nombre}?`,header:"Eliminar Marca",icon:"pi pi-info-circle",accept:()=>{this.spinner.show(),this.marcaService.eliminarMarca({parametro:{usuarioModificacion:this.datosSesion.usuarioAvexInfo.nombre,guid:a.guidMarca}}).subscribe(a=>{(null==a?void 0:a.resultado.resultado)&&(this.cambioCantidadRegistros(),this.alertService.mostrarNotificacion(o.a.EXITOSA,"Marca Eliminada","Marca eliminada de manera correcta."))},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al eliminar Marca","Se presentan problemas al realizar eliminacion de la marca, por favor intente nuevamente."),a})},reject:()=>{}})}cambiarEstado(a){var r,i;this.spinner.show();let t={guid:a.guidMarca,usuarioModificacion:null===(i=null===(r=this.datosSesion)||void 0===r?void 0:r.usuarioAvexInfo)||void 0===i?void 0:i.nombre};this.marcaService.cambiarEstadoMarca({parametro:t}).subscribe(()=>{this.spinner.hide()},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al actualizar Usuario","Se presentan problemas al realizar actualizacion de estado de usuario, por favor intente nuevamente."),a})}}return a.\u0275fac=function(r){return new(r||a)(s.Ob(c.i),s.Ob(l.a),s.Ob(e.b),s.Ob(e.a),s.Ob(u.c),s.Ob(d.b))},a.\u0275cmp=s.Ib({type:a,selectors:[["app-listar-marca"]],viewQuery:function(a,r){var i;1&a&&s.Jc(g,!0),2&a&&s.tc(i=s.cc())&&(r.paginador=i.first)},decls:8,vars:12,consts:[["dataKey","id","styleClass","p-datatable-responsive-demo",3,"value","globalFilterFields","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"rows","totalRecords","pageLinkSize","first","onPageChange"],["paginador",""],[3,"baseZIndex"],[1,"cabecera-tabla"],[1,"titulo"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Search...",3,"input"],[3,"value"],["pSortableColumn","nombre"],["field","nombre"],["type","text","field","nombre","display","menu"],["pSortableColumn","estado"],["field","estado"],["type","boolean","field","estado","display","menu"],[1,"p-column-title"],[3,"ngModel","onChange","ngModelChange"],[1,"acciones"],[1,"btn","btn-warning",3,"click"],[1,"fa","fa-edit"],[1,"btn","btn-danger",3,"click"],[1,"fa","fa-trash"]],template:function(a,r){1&a&&(s.Ub(0,"p-table",0,1),s.Ec(2,M,8,2,"ng-template",2),s.Ec(3,T,11,0,"ng-template",3),s.Ec(4,S,16,2,"ng-template",4),s.Tb(),s.Ub(5,"p-paginator",5,6),s.bc("onPageChange",(function(a){return r.cambiarPagina(a)})),s.Tb(),s.Pb(7,"p-confirmDialog",7)),2&a&&(s.jc("value",r.listaMarcas)("globalFilterFields",s.kc(10,R))("rowHover",!0),s.Cb(5),s.jc("rows",r.registros)("totalRecords",r.totalRegistros)("pageLinkSize",3)("first",0),s.Cb(2),s.Ac(s.kc(11,w)),s.jc("baseZIndex",0))},directives:[b.d,d.j,m.a,p.a,f.p,f.k,f.m,t.j,f.n,f.r,b.c,b.b,b.a,h.a],styles:[""]}),a})();var U=i("jMqV");function E(a,r){1&a&&(s.Ub(0,"span",12),s.Gc(1," Campo nombre es requerido "),s.Tb())}function I(a,r){if(1&a){const a=s.Vb();s.Ub(0,"button",13),s.bc("click",(function(){s.vc(a);const r=s.dc(2);return r.registrarMarca(r.formulario)})),s.Gc(1," Agregar "),s.Tb()}if(2&a){const a=s.dc(2);s.jc("disabled",!a.formularioActual.valid)}}function y(a,r){if(1&a){const a=s.Vb();s.Ub(0,"button",13),s.bc("click",(function(){s.vc(a);const r=s.dc(2);return r.modificarMarca(r.formulario)})),s.Gc(1," Modificar "),s.Tb()}if(2&a){const a=s.dc(2);s.jc("disabled",!a.formularioActual.valid)}}function O(a,r){if(1&a&&(s.Ub(0,"div",1),s.Ub(1,"h2"),s.Pb(2,"i",2),s.Gc(3),s.Tb(),s.Ub(4,"form",3),s.Ub(5,"div",4),s.Ub(6,"label",5),s.Gc(7,"Nombre"),s.Tb(),s.Pb(8,"input",6),s.Tb(),s.Ec(9,E,2,0,"span",7),s.Ub(10,"div",4),s.Ub(11,"label",8),s.Gc(12,"Habilitar"),s.Tb(),s.Pb(13,"mat-slide-toggle",9),s.Tb(),s.Ub(14,"div",10),s.Ec(15,I,2,1,"button",11),s.Ec(16,y,2,1,"button",11),s.Tb(),s.Tb(),s.Tb()),2&a){const a=s.dc();s.Cb(3),s.Ic(" ",null!=a.parametrosRuta&&a.parametrosRuta.modificacion?" Modificar":"Agregar "," Marca "),s.Cb(1),s.jc("formGroup",a.formularioActual),s.Cb(5),s.jc("ngIf",a.formulario.nombre.dirty&&a.formulario.nombre.errors&&a.formulario.nombre.errors.required),s.Cb(6),s.jc("ngIf",!(null!=a.parametrosRuta&&a.parametrosRuta.modificacion)),s.Cb(1),s.jc("ngIf",null==a.parametrosRuta?null:a.parametrosRuta.modificacion)}}let j=(()=>{class a{constructor(a,r,i,t){var e,o,n,s;this.marcaService=a,this.alertService=r,this.spinner=i,this.router=t,this.formularioRegistrarMarca=new f.f({nombre:new f.d("",[f.q.required]),habilitar:new f.d(!0,[f.q.required])}),this.formularioModificacionMarca=new f.f({nombre:new f.d("",[f.q.required]),habilitar:new f.d(!0,[f.q.required]),guidMarca:new f.d("",[f.q.required])}),this.parametrosRuta={},this.parametrosRuta.datosMarca=null===(n=null===(o=null===(e=this.router.getCurrentNavigation())||void 0===e?void 0:e.extras)||void 0===o?void 0:o.state)||void 0===n?void 0:n.datosMarca,this.parametrosRuta.modificacion=!!(null===(s=this.parametrosRuta)||void 0===s?void 0:s.datosMarca)}ngOnInit(){this.datosSesion=JSON.parse(localStorage.getItem(n.a)),this.parametrosRuta.modificacion?(this.formularioActual=this.formularioModificacionMarca,this.asignarValoresModificacion()):this.formularioActual=this.formularioRegistrarMarca}get formulario(){return this.formularioActual.controls}asignarValoresModificacion(){this.formulario.nombre.setValue(this.parametrosRuta.datosMarca.nombre),this.formulario.guidMarca.setValue(this.parametrosRuta.datosMarca.guidMarca),this.formulario.habilitar.setValue(this.parametrosRuta.datosMarca.estado),this.formularioActual.updateValueAndValidity()}registrarMarca(a){let r={usuarioCreacion:this.datosSesion.usuarioAvexInfo.usuario,nombre:a.nombre.value,estado:a.habilitar.value};this.spinner.show(),this.marcaService.registrarMarca({parametro:r}).subscribe(a=>{var r;this.spinner.hide(),!0===(null===(r=null==a?void 0:a.resultado)||void 0===r?void 0:r.resultado)&&(this.formularioActual.reset(),this.formulario.habilitar.setValue(!0),this.alertService.mostrarNotificacion(o.a.EXITOSA,"Registro de Marca","Marca registrada exitosamente."))},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al registrar Marca","Se presentan problemas al realizar el registro de la marca, por favor intente nuevamente."),a})}modificarMarca(a){let r={usuarioModificacion:this.datosSesion.usuarioAvexInfo.usuario,guidMarca:a.guidMarca.value,nombre:a.nombre.value,estado:a.habilitar.value};console.log(r),this.spinner.show(),this.marcaService.modificarMarca({parametro:r}).subscribe(a=>{var r;this.spinner.hide(),!0===(null===(r=null==a?void 0:a.resultado)||void 0===r?void 0:r.resultado)&&this.alertService.mostrarNotificacion(o.a.EXITOSA,"Modificacion de Marca","Marca modificada exitosamente.")},a=>{throw this.spinner.hide(),this.alertService.mostrarNotificacion(o.a.ERROR,"Error al modificar Marca","Se presentan problemas al realizar la modificacion de la Marca, por favor intente nuevamente."),a})}}return a.\u0275fac=function(r){return new(r||a)(s.Ob(c.i),s.Ob(l.a),s.Ob(u.c),s.Ob(e.b))},a.\u0275cmp=s.Ib({type:a,selectors:[["app-registrar-marca"]],decls:1,vars:1,consts:[["class","contenedor",4,"ngIf"],[1,"contenedor"],[1,"fa","fa-align-justify"],[3,"formGroup"],[1,"item-formulario"],["for","nombre"],["type","text","placeholder","Nombre de la Marca","autocomplete","off","formControlName","nombre","id","nombre",1,"form-control"],["class","text-danger",4,"ngIf"],["for","habilitar",1,"label-personalizado"],["formControlName","habilitar","color","primary","id","habilitar"],[1,"contenedor-botones"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"text-danger"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(a,r){1&a&&s.Ec(0,O,17,5,"div",0),2&a&&s.jc("ngIf",r.formularioActual)},directives:[t.k,f.s,f.l,f.g,f.b,f.k,f.e,U.a],styles:[""]}),a})();const A=[{path:"",redirectTo:"listarMarcas"},{path:"listarMarcas",component:C},{path:"registrarMarca",component:j},{path:"modificarMarca",component:j}];let G=(()=>{class a{}return a.\u0275mod=s.Mb({type:a}),a.\u0275inj=s.Lb({factory:function(r){return new(r||a)},imports:[[e.c.forChild(A)],e.c]}),a})();var P=i("0YIw");let N=(()=>{class a{}return a.\u0275mod=s.Mb({type:a}),a.\u0275inj=s.Lb({factory:function(r){return new(r||a)},imports:[[t.b,P.a,G,c.h]]}),a})()}}]);